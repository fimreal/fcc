variant: fcos
version: 1.4.0
kernel_arguments:
  should_exist:
    - selinux=0
passwd:
  users:
    - name: lmr
      groups:
        - docker
        - sudo
      password_hash: $y$j9T$avmZo2f7txYwPs3H02yTk/$3sXp/LMxj7.lTTGadKyu5qb8PJzdXhM44zYQIr3AyV4
      home_dir: /home/lmr
      shell: /bin/bash
    - name: root
      ssh_authorized_keys:
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIDBTed9KFiRw30p42s/PXgUHzguu5IwhYcapiwQm0RfV"
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGj+52psmR65lVP9FkxWvTZSUlDZllhAhzeP9na7HadX"
storage:
  files:
    - path: /etc/hostname
      mode: 0644
      contents:
        inline: |
          fcos
    - path: /etc/sysctl.d/20-silence-audit.conf
      mode: 0644
      contents:
        inline: |
          # Raise console message logging level from DEBUG (7) to WARNING (4)
          # to hide audit messages from the interactive console
          kernel.printk=4
    - path: /etc/sysctl.d/90-ipv4-ip-forward.conf
      mode: 0644
      contents:
        inline: |
          net.ipv4.ip_forward = 1

    - path: /etc/sysctl.d/90-ipv6-ip-forwarding.conf
      mode: 0644
      contents:
        inline: |
          net.ipv6.conf.all.forwarding = 1
  # - path: /etc/profile.d/systemd-pager.sh
  #   mode: 0644
  #   contents:
  #     inline: |
  #       # Tell systemd to not use a pager when printing information
  #       export SYSTEMD_PAGER=cat
    - path: /etc/ssh/sshd_config.d/99-sshd.conf
      mode: 0644
      contents:
        inline: |
          Port 1231
          ClientAliveInterval 180
          PasswordAuthentication yes
    - path: /etc/NetworkManager/conf.d/no-dns.conf
      mode: 0644
      contents:
        inline: |
          [main]
          dns=none
  links:
    - path: /etc/localtime
      target: ../usr/share/zoneinfo/Asia/Shanghai
